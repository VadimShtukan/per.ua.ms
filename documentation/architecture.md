# Architecture

## Services Decomposition 

Декомпозизая сервисов была произведена на основе пользовательского сценария - https://github.com/VadimShtukan/per.ua.ms/blob/master/documentation/use_case/create_order.md. В результате были выделены следующие сервисы:
- Сервис пользователей (User service).
    - Информация о пользователях.
    - Генерация токенов для пользователей.
    - Аутентификация пользователей.
    - Привязка пользователей к группам.
- Сервис товаров (Product service).
    - Описание и характеристики товаров, изображение.
    - Товарные остатки.
    - Вычисление стоимости товаров от базовой цены (в зависимости от курса доллара)
- Сервис заказов и корзины (Order service).
    - Информация о заказе, товары в заказе, общая сумма заказа.
    - Информация о доставке заказе.
    - Статусы заказов.
    - История изменения заказов.
- Сервис для отправки уведомлений - почта, СМС, Telegram, Viber (Notification service).
    - Формирование текста уведомления.
    - Принятие решения по способу доставки сообщений.
    - Контроль доставки сообщений.
- Сервис оплат (Payment service)

- чеки фискальные
- чеки не фискальные
- Новая почта
- Экваиринг
- РРО и х-отчет
- напоминание о незабранных посылках
- напоминание об оплате/отмена заказов

## Общая схема


## Межсервисное взаимодействие (синхронное, асинхронное)
- EventDriven

## Диграмма состояния (кафка)

## Кеширование

## Защита от двойной отправки сообщений

## Метрики
- Ошибки
- Скорость
- Бизнес метрики

## Мониторинг, алертинг и  логирование



 
